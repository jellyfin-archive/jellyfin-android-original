(function(){function show(options){var id='dlg'+new Date().getTime();var html='';var style="";var windowHeight=$(window).height();if(options.positionTo&&windowHeight>=540){var pos=$(options.positionTo).offset();pos.top+=$(options.positionTo).innerHeight()/2;pos.left+=$(options.positionTo).innerWidth()/2;pos.top-=24;pos.left-=24;pos.top-=(55*options.items.length)/2;pos.left-=80;pos.top-=$(window).scrollTop();pos.left-=$(window).scrollLeft();pos.top=Math.min(pos.top,$(window).height()-300);pos.left=Math.min(pos.left,$(window).width()-300);pos.top=Math.max(pos.top,0);pos.left=Math.max(pos.left,0);style+='position:fixed;top:'+pos.top+'px;left:'+pos.left+'px';}
html+='<paper-dialog id="'+id+'" with-backdrop style="'+style+'">';if(options.title){html+='<h2>';html+=options.title;html+='</h2>';}
var isScrollable=!$.browser.safari;if(isScrollable){html+='<paper-dialog-scrollable>';}
var renderIcon=options.items.filter(function(o){return o.ironIcon;}).length;html+='<paper-menu>';for(var i=0,length=options.items.length;i<length;i++){var option=options.items[i];html+='<paper-menu-item class="actionSheetMenuItem" data-id="'+option.id+'" style="display:block;">';if(option.ironIcon){html+='<iron-icon icon="'+option.ironIcon+'"></iron-icon>';}
else if(renderIcon){html+='<iron-icon></iron-icon>';}
html+='<span>'+option.name+'</span>';html+='</paper-menu-item>';}
html+='</paper-menu>';if(isScrollable){html+='</paper-dialog-scrollable>';}
if(options.showCancel){html+='<div class="buttons">';html+='<paper-button dialog-dismiss>'+Globalize.translate('ButtonCancel')+'</paper-button>';html+='</div>';}
html+='</paper-dialog>';$(document.body).append(html);setTimeout(function(){var dlg=document.getElementById(id);dlg.open();$(dlg).on('iron-overlay-closed',function(){$(this).remove();});var eventName=$.browser.chrome||$.browser.safari?'click':'mousedown';$('.actionSheetMenuItem',dlg).on(eventName,function(){var selectedId=this.getAttribute('data-id');setTimeout(function(){dlg.close();if(options.callback){options.callback(selectedId);}},100);});},100);}
window.ActionSheetElement={show:show};})();