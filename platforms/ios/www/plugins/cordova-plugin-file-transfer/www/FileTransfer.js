cordova.define("cordova-plugin-file-transfer.FileTransfer",function(e,r,n){function o(e){var r=new d;return r.lengthComputable=e.lengthComputable,r.loaded=e.loaded,r.total=e.total,r}function t(e){var r=/^https?\:\/\/(?:(?:(([^:@\/]*)(?::([^@\/]*))?)?@)?([^:\/?#]*)(?::(\d*))?).*$/,n=r.exec(e);return n&&n[1]}function a(e){var r=null;if(window.btoa){var n=t(e);if(n){var o="Authorization",a="Basic "+window.btoa(n);r={name:o,value:a}}}return r}function i(e){var r=[];for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];r.push({name:n,value:o.toString()})}return r}var l=e("cordova/argscheck"),s=e("cordova/exec"),u=e("./FileTransferError"),d=e("cordova-plugin-file.ProgressEvent"),f=0,p=function(){this._id=++f,this.onprogress=null};p.prototype.upload=function(e,r,n,d,f,p){l.checkArgs("ssFFO*","FileTransfer.upload",arguments);var c=null,h=null,v=null,m=null,g=!0,y=null,w=null,F=a(r);F&&(r=r.replace(t(r)+"@",""),f=f||{},f.headers=f.headers||{},f.headers[F.name]=F.value),f&&(c=f.fileKey,h=f.fileName,v=f.mimeType,y=f.headers,w=f.httpMethod||"POST",w="PUT"==w.toUpperCase()?"PUT":"POST",(null!==f.chunkedMode||"undefined"!=typeof f.chunkedMode)&&(g=f.chunkedMode),m=f.params?f.params:{}),"windowsphone"===cordova.platformId&&(y=y&&i(y),m=m&&i(m));var T=d&&function(e){var r=new u(e.code,e.source,e.target,e.http_status,e.body,e.exception);d(r)},b=this,P=function(e){"undefined"!=typeof e.lengthComputable?b.onprogress&&b.onprogress(o(e)):n&&n(e)};s(P,T,"FileTransfer","upload",[e,r,c,h,v,m,p,g,y,this._id,w])},p.prototype.download=function(r,n,d,f,p,c){l.checkArgs("ssFF*","FileTransfer.download",arguments);var h=this,v=a(r);v&&(r=r.replace(t(r)+"@",""),c=c||{},c.headers=c.headers||{},c.headers[v.name]=v.value);var m=null;c&&(m=c.headers||null),"windowsphone"===cordova.platformId&&m&&(m=i(m));var g=function(r){if("undefined"!=typeof r.lengthComputable){if(h.onprogress)return h.onprogress(o(r))}else if(d){var n=null;r.isDirectory?n=new(e("cordova-plugin-file.DirectoryEntry")):r.isFile&&(n=new(e("cordova-plugin-file.FileEntry"))),n.isDirectory=r.isDirectory,n.isFile=r.isFile,n.name=r.name,n.fullPath=r.fullPath,n.filesystem=new FileSystem(r.filesystemName||(r.filesystem==window.PERSISTENT?"persistent":"temporary")),n.nativeURL=r.nativeURL,d(n)}},y=f&&function(e){var r=new u(e.code,e.source,e.target,e.http_status,e.body,e.exception);f(r)};s(g,y,"FileTransfer","download",[r,n,p,this._id,m])},p.prototype.abort=function(){s(null,null,"FileTransfer","abort",[this._id])},n.exports=p});